sap.ui.define(["oft/fiori/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/routing/RouteMatchedHandler"],function(e,t,a,s){"use strict";return e.extend("oft.fiori.controller.holidayCalendar",{onInit:function(){debugger;var e=this.getView().byId("idHoliday");e.setDateValue(new Date);var t=this.getOwnerComponent().getRouter();t.attachRoutePatternMatched(this.herculis,this);var a=this.getModel("local").getProperty("/CurrentUser");if(a){var s=this.getModel("local").oData.AppUsers[a].UserName;this.getView().byId("idUser").setText(s)}},herculis:function(){debugger;this.getView().byId("idHoliday").setDateValue(new Date);var e=this.getView().byId("idHoliday").getDateValue(new Date).getDay();switch(e){case 0:this.getView().byId("idDay").setValue("Sunday");break;case 1:this.getView().byId("idDay").setValue("Monday");break;case 2:this.getView().byId("idDay").setValue("Tuesday");break;case 3:this.getView().byId("idDay").setValue("Wednesday");break;case 4:this.getView().byId("idDay").setValue("Thursday");break;case 5:this.getView().byId("idDay").setValue("Friday");break;case 6:this.getView().byId("idDay").setValue("Saturday");break;default:}this.getModel("local").setProperty("/holidayCalendar/Date",new Date);this.currentUser=this.getModel("local").getProperty("/CurrentUser");this.fromDate=new Date(2019,0,1);this.toDate=new Date(2019,0,31);this.fromDate.setMilliseconds(0);this.fromDate.setSeconds(0);this.fromDate.setMinutes(0);this.fromDate.setHours(0);this.toDate.setMilliseconds(0);this.toDate.setSeconds(59);this.toDate.setMinutes(59);this.toDate.setHours(23);this.reloadTasks()},reloadTasks:function(e){debugger;var t=this.getModel("local").getProperty("/Role");this.getView().byId("idHolidayTable").bindItems({path:"/HolidayCalendars",template:new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{Day}"}),new sap.m.Text({text:{path:"Date",type:"sap.ui.model.type.Date",formatOptions:{pattern:"dd.MM.YYYY"}}}),new sap.m.Text({text:"{Occasion}"}),new sap.m.Button({text:"Delete",icon:"sap-icon://delete",press:[this.onDelete,this]})]})})},onUpdateFinished:function(e){debugger;var t=e.getSource();var a=t.getItems();var s=a.length;var i;var r=this.getView().byId("idHolidayTable").getBinding("items").getLength();var o=this.getView().byId("idHolidayTable").getBinding("items");var d=0;for(var n=0;n<r;n++){d=d+parseInt(o.getContexts()[n].oModel.getProperty(o.getContexts()[n].sPath).noOfHours)}},onDateChange:function(e){debugger;var t=this.getModel("local").getProperty("/Role");var a=e.getSource().getProperty("dateValue").getDay();switch(a){case 0:this.getView().byId("idDay").setValue("Sunday");break;case 1:this.getView().byId("idDay").setValue("Monday");break;case 2:this.getView().byId("idDay").setValue("Tuesday");break;case 3:this.getView().byId("idDay").setValue("Wednesday");break;case 4:this.getView().byId("idDay").setValue("Thursday");break;case 5:this.getView().byId("idDay").setValue("Friday");break;case 6:this.getView().byId("idDay").setValue("Saturday");break;default:}},onDelete:function(e){debugger;var t=this;var a=e.getSource().getBindingContext().getPath();sap.m.MessageBox.confirm("Do you want to delete the selected records?",function(e){if(e=="OK"){t.ODataHelper.callOData(t.getOwnerComponent().getModel(),a,"DELETE",{},{},t).then(function(e){sap.m.MessageToast.show("Deleted succesfully")}).catch(function(e){t.getView().setBusy(false);t.oPopover=t.getErrorMessage(e);t.getView().setBusy(false)})}},"Confirmation")},onSave:function(e){debugger;var t=this;var a=this.getView().getModel("local").getProperty("/holidayCalendar");var s=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-dd"});a.Day=this.getView().byId("idDay").getValue();a.Occasion=this.getView().byId("idOccasion").getValue();var i=this.getView().byId("idHoliday");var r=i.getDateValue();a.Date=r;this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/HolidayCalendars","POST",{},a,this).then(function(e){t.getView().setBusy(false);sap.m.MessageToast.show("Data Saved Successfully")}).catch(function(e){t.getView().setBusy(false);var a=t.getErrorMessage(e)})}})});
//# sourceMappingURL=holidayCalendar.controller.js.map