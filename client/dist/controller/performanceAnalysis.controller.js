sap.ui.define(["oft/fiori/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/m/routing/RouteMatchedHandler","sap/ui/table/Table","oft/fiori/models/formatter","oft/fiori/utils/dateFormatter","sap/m/MessageToast"],function(e,a,t,r,n,o,l,s,d){"use strict";return e.extend("oft.fiori.controller.performanceAnalysis",{aFilters:[],onInit:function(){debugger;var e=this.getModel("local").getProperty("/CurrentUser");var a=this.getModel("local").getProperty("/Role")},herculis:function(e){if(e.getParameter("name")!=="timeTracker"){return}this.currentUser=this.getModel("local").getProperty("/CurrentUser");var a=new Date;this.reloadTasks()},reloadTasks:function(){debugger;var e=this.getModel("local").getProperty("/Role");var a=this.getModel("local").getProperty("/CurrentUser");var t=new Date;this.getView().byId("idTimeTrackerCalendar").setCurrentDate(t);var r={Month:t,EmpId:this.currentUser};if(e=="Admin"){setTimeout(this.afterCalLoad.bind(this),1e3)}else{setTimeout(this.afterCalLoad.bind(this),1e3)}},afterCalLoad:function(){var e=this.getModel("local").getProperty("/CurrentUser");var a=new Date;this.getView().byId("idTimeTrackerCalendar").setCurrentDate(a);var t={Month:a,EmpId:this.currentUser};$.post("/getTimeTracker",t).done(function(e,a){if(e.length){for(var t=0;t<e.length;t++){var r=e[t].Date;r=new Date(r);e[t].Date=r}var n=document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay").length;for(var t=7;t<=n;t++){var o=parseInt(document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].id.split("--")[2].split("idTimeTrackerCalendar-")[1].split("-")[2]);var l=e[0].Date.getDate();if(l===o){for(var s=0;s<e.length;s++){if(e[s].remark==="PH"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ffff4d";t++}else if(e[s].hours===8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699"}t++}else if(e[s].hours==="Holiday"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#666699";t++}else if(e[s].hours<8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ff3333"}t++}else if(e[s].hours==="LEAVE"){if(e[s].LeaveType=="Full Day"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff"}else{document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff";document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.borderLeftWidth="45px"}t++}else if(e[s].hours>8){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699";t++}}break}}}else{sap.m.MessageToast.show("You Don't hava Data recorded for this Month")}debugger}).fail(function(e,a,t){sap.m.MessageBox.console.error("Something is wrong in your Code")})},onSelect:function(e){debugger;var a=e.getSource().getSelectedKey();this.currentUser=a;setTimeout(this.loadCurrentUserData.bind(this),1e3)},loadCurrentUserData:function(){debugger;var e=this.getModel("local").getProperty("/CurrentUser");var a=new Date(this.getView().byId("idTimeTrackerCalendar").getCurrentDate());var t={Month:a,EmpId:this.currentUser};$.post("/getTimeTracker",t).done(function(e,a){if(e.length){for(var t=0;t<e.length;t++){var r=e[t].Date;r=new Date(r);e[t].Date=r}var n=document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay").length;for(var t=7;t<=n;t++){var o=parseInt(document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].id.split("--")[2].split("idTimeTrackerCalendar-")[1].split("-")[2]);var l=e[0].Date.getDate();if(l===o){for(var s=0;s<e.length;s++){if(e[s].remark==="PH"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ffff4d";t++}else if(e[s].hours===8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699"}t++}else if(e[s].hours==="Holiday"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#666699";t++}else if(e[s].hours<8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ff3333"}t++}else if(e[s].hours==="LEAVE"){if(e[s].LeaveType=="Full Day"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff"}else{document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff";document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.borderLeftWidth="45px"}t++}else if(e[s].hours>8){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699";t++}}break}}}else{sap.m.MessageToast.show("You Don't have Data recorded for this month")}}).fail(function(e,a,t){sap.m.MessageBox.console.error("Something is wrong in your Code")})},onChangeCurrentDate:function(e){debugger;var a=this.getModel("local").getProperty("/Role");var t=this.getView().byId("idUser").getValue();if(a=="Admin"){setTimeout(this.afterCalChange.bind(this),1e3)}else{setTimeout(this.afterCalChange.bind(this),1e3)}},afterCalChange:function(){debugger;var e=this.getModel("local").getProperty("/CurrentUser");var a=new Date(this.getView().byId("idTimeTrackerCalendar").getCurrentDate());var t={Month:a,EmpId:this.currentUser};$.post("/getTimeTracker",t).done(function(e,a){if(e.length){for(var t=0;t<e.length;t++){var r=e[t].Date;r=new Date(r);e[t].Date=r}var n=document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay").length;for(var t=7;t<=n;t++){var o=parseInt(document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].id.split("--")[2].split("idTimeTrackerCalendar-")[1].split("-")[2]);var l=e[0].Date.getDate();if(l===o){for(var s=0;s<e.length;s++){if(e[s].remark==="PH"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ffff4d";t++}else if(e[s].hours===8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699"}t++}else if(e[s].hours==="Holiday"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#666699";t++}else if(e[s].hours<8){if(e[s].Date<=new Date){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#ff3333"}t++}else if(e[s].hours==="LEAVE"){if(e[s].LeaveType=="Full Day"){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff"}else{document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#4d79ff";document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.borderLeftWidth="45px"}t++}else if(e[s].hours>8){document.getElementById("__component0---idTimeTracker--idTimeTrackerCalendar").getElementsByClassName("sapMeCalendarMonthDay")[t].style.backgroundColor="#99e699";t++}}break}}}else{sap.m.MessageToast.show("You Don't have Data recorded for this month")}}).fail(function(e,a,t){sap.m.MessageBox.console.error("Something is wrong in your Code")})}})});
//# sourceMappingURL=performanceAnalysis.controller.js.map