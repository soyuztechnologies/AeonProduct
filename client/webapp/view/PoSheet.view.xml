<mvc:View controllerName="ent.ui.ecommerce.controller.PoSheet"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:uiTable="sap.ui.table"
	xmlns:fb="sap.ui.comp.filterbar">
	<Page showHeader="false">
		<subHeader>
			<OverflowToolbar>
				<Title text="PO Sheet" level="H2"/>
				<ToolbarSpacer ></ToolbarSpacer>
		   </OverflowToolbar>
		</subHeader>
		<fb:FilterBar class="classFilterBar" id="filterbarPo" persistencyKey="myPersKey" useToolbar="false" showFilterConfiguration="false" search=".onSearch"  clear="onClearFilters" showClearOnFB="true" >
			<fb:filterGroupItems>
				<fb:FilterGroupItem name="Po" label="Po" groupName="Group1" visibleInFilterBar="true" >
					<fb:control>
						<Input id="searchPo"></Input>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Supplier Name" label="Supplier Name" groupName="Group2" visibleInFilterBar="true" >
					<fb:control>
						<ComboBox items="{appView>/DropdownSupplier}" showClearIcon="true">
							<items>
								<core:Item enabled="true" text="{appView>OptionName}" key="{appView>id}" />
							</items>
						</ComboBox>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Mill" label="Mill" groupName="Group3" visibleInFilterBar="true" >
					<fb:control>
						<ComboBox items="{appView>/DropdownMill}" showClearIcon="true">
							<items>
								<core:Item enabled="true" text="{appView>OptionName}" key="{appView>id}" />
							</items>
						</ComboBox>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Quality Of Material" label="Quality Of Material" groupName="Group4" visibleInFilterBar="true" >
					<fb:control>
						<ComboBox items="{appView>/DropdownQuality}" showClearIcon="true">
							<items>
								<core:Item enabled="true" text="{appView>OptionName}" key="{appView>id}" />
							</items>
						</ComboBox>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Type Of Board" label="Type Of Board" groupName="Group5" visibleInFilterBar="true" >
					<fb:control>
						<ComboBox items="{appView>/DropdownBoard}" showClearIcon="true">
							<items>
								<core:Item enabled="true" text="{appView>OptionName}" key="{appView>id}" />
							</items>
						</ComboBox>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="GSM" label="GSM" groupName="Group6" visibleInFilterBar="true" >
					<fb:control>
						<Input id="searchGSM" ></Input>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Height in mm" label="Height in mm" groupName="Group7" visibleInFilterBar="true" >
					<fb:control>
						<Input id="searchHeight" ></Input>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="Width in mm" label="Width in mm" groupName="Group8" visibleInFilterBar="true" >
					<fb:control>
						<Input id="searchWidth" ></Input>
					</fb:control>
				</fb:FilterGroupItem>
				<fb:FilterGroupItem name="InStock Sheets" label="InStock Sheets" groupName="Group9" visibleInFilterBar="true" >
					<fb:control>
						<Switch tooltip="This will show all InStock Sheets" id="idSwitchSheets" customTextOn="In" customTextOff="All" change="onGetInStockSheets"></Switch>
					</fb:control>
				</fb:FilterGroupItem>
				
			</fb:filterGroupItems>
		</fb:FilterBar>
		
		

		<Table id="tablePoSheet" growing="true" growingScrollToLoad="true" growingThreshold="20" autoPopinMode="true" popinLayout="GridSmall" items="{path: 'appView>/PoSheet', sorter: { path: 'CreatedOn', descending: true }}"  sticky="HeaderToolbar,ColumnHeaders,InfoToolbar" itemPress="onRowPress" mode="SingleSelectLeft" >  
			<headerToolbar>
				<OverflowToolbar >
					<Title text="PO Table ({appView>/PoSheetCount})"></Title>
					<ToolbarSpacer ></ToolbarSpacer>
					<!-- <ToolbarSeparator/> -->
					<Button text="Transfer" type="Emphasized" press="onTransferPoSheets" icon="sap-icon://share-2"/>
					<Button text="Split" type="Critical" press="onSpiltPoSheets" icon="sap-icon://split"/>
					<Button text="Generate PDF" type="Attention" press="beforeGeneratePDF" icon="sap-icon://pdf-attachment"/>
					<Button text="Add" type="Neutral" press="onAddPO" icon="sap-icon://add"/>
				</OverflowToolbar>
			</headerToolbar>
			<columns>
				<Column demandPopin="true" width="4rem" minScreenWidth="Phone" >
					<Text text="Po No" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Supplier Name" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Mill" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Quality Of Material" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Type Of Board" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Rate" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="GSM" />
				</Column>
				<Column demandPopin="true" width="4rem" minScreenWidth="Phone" >
					<Text text="Size in" />
				</Column>
				<Column demandPopin="true" width="4rem" minScreenWidth="Phone" >
					<Text text="mm" />
				</Column>
				<Column demandPopin="true" width="4rem" minScreenWidth="Phone" >
					<Text text="Size in" />
				</Column>
				<Column demandPopin="true" width="4rem" minScreenWidth="Phone" >
					<Text text="Inches" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Opening Wt." />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Opening Stock" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Closing Stock" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Final Price" />
				</Column>
				<Column demandPopin="true" width="6rem" minScreenWidth="Phone" >
					<Text text="Closing Wt." />
				</Column>
				<Column demandPopin="true" minScreenWidth="Phone" >
					<Text text="Status" />
				</Column>
		
			</columns>
			<items>
				<ColumnListItem type="Active">
					<cells>
						<Text text="{appView>PoNo}"/>	
						<Text text="{appView>SupplierName}" />	
						<Text text="{appView>Mill}" />	
						<Text text="{appView>QualityOfMaterial}" />	
						<Text text="{appView>TypeOfBoard}" />	
						<Text text="{path : 'appView>Rate', formatter: '.formatter.formatRate'}" />	
						<Text text="{path : 'appView>GSM', formatter: '.formatter.formatGSM'}" />	
						<Text text="{appView>Height}" />	
						<Text text="{appView>Width}" />	
						<Text text="{path : 'appView>Height', formatter: '.formatter.formatLengthinInches'}" />	
						<Text text="{path : 'appView>Width', formatter: '.formatter.formatLengthinInches'}" />	
						<Text text="{parts: [{path: 'appView>Height'}, {path: 'appView>Width'}, {path: 'appView>GSM'}, {path: 'appView>OpeningStock'}], formatter: '.formatter.formatOpeningWeight'}" />	
						<Text text="{path: 'appView>OpeningStock', formatter: '.formatter.formatSheets'}" />	
						<!-- <Text text="{parts: [{path: 'appView>OpeningStock'}, {path: 'appView>UsedSheets'}], formatter: '.formatter.formatClosingStock'}" />	 -->
						<Text text="{appView>ClosingStock} Sheets" />	
						<Text text="{parts: [{path: 'appView>Rate'}, {path: 'appView>Height'}, {path: 'appView>Width'}, {path: 'appView>GSM'}, {path: 'appView>ClosingStock'}], formatter: '.formatter.formatFinalPrice'}" />	
						<Text text="{parts: [{path: 'appView>Height'}, {path: 'appView>Width'}, {path: 'appView>GSM'}, {path: 'appView>ClosingStock'}], formatter: '.formatter.formatClosingWeight'}" />	
						<Select forceSelection="false" change="onSelectPoStatus" selectedKey="{appView>Status}">
							<core:Item text="Pending" key="Pending" /> 
							<core:Item text="Email Sent" key="Sent" />
							<core:Item text="Received" key="Received"/>
						</Select>
					</cells>
					<customData>
						<core:CustomData 
							key="po-status"
							value="{appView>Status}"
							writeToDom="true"
						></core:CustomData>
					</customData>
				</ColumnListItem>
			</items>
			<infoToolbar>
				<OverflowToolbar design="Info">
					<Title text="Total:" class="sapUiTinyMarginEnd">
						<layoutData>
							<OverflowToolbarLayoutData priority="NeverOverflow"/>
						</layoutData>
					</Title>
					
					<ToolbarSpacer>
						<layoutData>
							<OverflowToolbarLayoutData priority="NeverOverflow" minWidth="0"/>
						</layoutData>
					</ToolbarSpacer>
					
					<Label text="Opening Wt: {path: 'appView>/totals/openingWeight', formatter: '.formatter.formatWeight'}" 
						class="sapUiTinyMarginEnd">
						<layoutData>
							<OverflowToolbarLayoutData priority="High"/>
						</layoutData>
					</Label>
					
					<Label text="Opening Stock: {appView>/totals/openingStock} Sheets" 
						class="sapUiTinyMarginEnd">
						<layoutData>
							<OverflowToolbarLayoutData priority="High"/>
						</layoutData>
					</Label>
					
					<Label text="Closing Stock: {appView>/totals/closingStock} Sheets" 
						class="sapUiTinyMarginEnd">
						<layoutData>
							<OverflowToolbarLayoutData priority="Low"/>
						</layoutData>
					</Label>
					
					<Label text="Final Price: Rs. {appView>/totals/finalPrice}" 
						class="sapUiTinyMarginEnd">
						<layoutData>
							<OverflowToolbarLayoutData priority="Low"/>
						</layoutData>
					</Label>
					
					<Label text="Closing Wt: {path: 'appView>/totals/closingWeight', formatter: '.formatter.formatWeight'}">
						<layoutData>
							<OverflowToolbarLayoutData priority="Low"/>
						</layoutData>
					</Label>
				</OverflowToolbar>
			</infoToolbar>
		</Table>
	</Page>
</mvc:View>